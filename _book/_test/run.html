<!DOCTYPE html>
<html>

<head>
    <title>在线运行</title>
    <meta charset="utf-8">
    <meta name="author" content="author, email address">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="viewport" content="" />
    <meta http-equiv="Content-Type" content="text/html">
    <meta name="full-screen" content="yes">
    <link rel="stylesheet" type="text/css" href="./init.css" />
</head>

<body>
    <div class="main-page">
        <div class="main-head"></div>
        <div class="main-content">
            <div class="div-cld">
                <div class="cld-head">
                    <div>源代码:</div>
                    <button id="btn_run">点击运行</button>
                </div>
                <textarea id="ipt_content"></textarea>
            </div>
            <div class="div-cld">
                <div class="cld-head">
                    <div>运行结果</div>
                </div>
                <div class="text-content">
                    <div id="opt_content"></div>
                </div>
            </div>
        </div>
        <div class="dialog" id="dialog">
            <div class="loading">
                <div class="loading-icon"></div>
                <div class="ladding-text">请稍后...</div>
            </div>

        </div>
    </div>
</body>

</html>
<script>
    document.getElementById("btn_run").addEventListener("click", function () {
        document.getElementById("dialog").style.display = "block";
        var content = document.getElementById("ipt_content").value.replace(/\+/g, "%2B");
        var httpRequest = new XMLHttpRequest();
        httpRequest.open('GET', 'http://10.0.248.208:3000/buna?code=' + content);
        httpRequest.send();
        httpRequest.onreadystatechange = function (e) {
            if (httpRequest.readyState == 4 && httpRequest.status == 200) {
                var _data = JSON.parse(httpRequest.response);
                var str = "";
                _data.stdout.forEach(x => {
                    str += x + "<br/>"
                });
                document.getElementById("opt_content").innerHTML = str;
                document.getElementById("dialog").style.display = "none";
            }

        }
    })
</script>
<style>
    @media screen and (max-width: 401px) {
        .main-content {
            height: 85%;
            padding: 30px 50px 30px 50px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
        }

        .div-cld {
            width: 49%;
            height: 50%;
            background-color: #ffffff;
            border: 1px solid #ddd;
        }

        .div-cld textarea {
            outline: none;
            resize: none;
            overflow: auto;
            word-break: break-all;
            font-size: 20px;
            width: 99.3%;
            height: 85.5%;
            border: 0;
        }
    }

    .main-page {
        width: 100%;
        height: 100%;
        background-color: #f5f5f5;
    }

    .main-head {
        width: 100%;
        height: 100px;
        background-color: #fdc607;
    }

    .main-content {
        height: 85%;
        padding: 30px 50px 30px 50px;
        display: flex;
        justify-content: space-between;
        box-sizing: border-box;
    }

    .div-cld {
        width: 49%;
        height: 100%;
        background-color: #ffffff;
        border: 1px solid #ddd;
    }

    .cld-head {
        width: 100%;
        height: 50px;
        border-bottom: 1px solid #ddd;
        background-color: #f5f5f5;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .cld-head div {
        width: 80px;
        height: 35px;
        border: 1px solid #ddd;
        font-size: 14px;
        text-align: center;
        line-height: 35px;
        margin-left: 30px;
        border-radius: 5px;
    }

    .cld-head button {
        outline: none;
        width: 80px;
        height: 35px;
        margin-right: 30px;
        border-radius: 5px;
        background-color: #ffa60c;
        color: #ffffff;
        border: 0;
    }

    .div-cld textarea {
        outline: none;
        resize: none;
        overflow: auto;
        word-break: break-all;
        font-size: 20px;
        width: 99.3%;
        height: 85.5%;
        border: 0;
    }

    .text-content {
        width: 99.3%;
        height: 85.5%;
        padding: 20px;
        box-sizing: border-box;

    }

    .dialog {
        display: none;
        z-index: 9999;
        background-color: #4D4D4D;
        opacity: 0.5;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        width: 100%;
        height: 100%;
    }

    .loading {
        position: absolute;
        top: 45%;
        left: 49%;
    }

    .loading-icon {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        border: 5px solid black;
        border-left: 5px solid #ffa60c;
        animation: load 1s linear infinite;
        -moz-animation: load 1s linear infinite;
        -webkit-animation: load 1s linear infinite;
        -o-animation: load 1s linear infinite;
    }

    .ladding-text {
        margin-top: 30px;
        color: #FFFACD;
    }

    @-webkit-keyframes load {
        from {
            -webkit-transform: rotate(0deg);
        }

        to {
            -webkit-transform: rotate(360deg);
        }
    }

    @-moz-keyframes load {
        from {
            -moz-transform: rotate(0deg);
        }

        to {
            -moz-transform: rotate(360deg);
        }
    }

    @-o-keyframes load {
        from {
            -o-transform: rotate(0deg);
        }

        to {
            -o-transform: rotate(360deg);
        }
    }
</style>